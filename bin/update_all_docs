#!/usr/bin/env ruby

DIRS = {}

def add_lib(lib, *opts)
  DIRS[lib] = opts
end

add_lib("stdlib/abbrev", "--docs-from=lib/abbrev.rb")
add_lib("stdlib/base64")

# Usage:
#   bin/update_all_docs stdlib/pathname
#   bin/update_all_docs

dirs =
  unless ARGV.empty?
    ARGV
  else
    DIRS.keys
  end

dirs.each do |dir|
  options = DIRS[dir]
  command = "#{File.join(__dir__, "rdoc-tool")} annotate #{options.join(" ")} #{dir}/**/*.rbs"
  puts command
  system command
end
